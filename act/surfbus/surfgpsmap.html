<style>
html, body, iframe, h1, h2, h3, h4, h5, h6, a, img, dl, dt, dd, fieldset, form, input, label, table, caption, tbody, tfoot, thead, tr, th, td, embed, hgroup{margin:0; padding:0; font-size:12px;}

.overlaybox {position:relative;height:270px;background:url('https://surfenjoy.cdn3.cafe24.com/shop/box_movie.png') no-repeat;padding:0px 10px 0px 10px;left:15px;}
.overlaybox div, ul {overflow:hidden;margin:0;padding:0;}
.overlaybox li {list-style: none;}
.overlaybox .boxtitle {color:#fff;font-size:16px;font-weight:bold;margin-bottom:8px;padding-top:3px;}
.overlaybox .first {position:relative;width:247px;height:136px;margin-bottom:8px;}
.first .text {color:#fff;font-weight:bold;}
.first .movietitle {position:absolute;width:100%;bottom:0;background:rgba(0,0,0,0.4);padding:7px 15px;font-size:14px;}
.overlaybox ul {width:247px;}
.overlaybox li {position:relative;margin-bottom:2px;background:#2b2d36;padding:5px 10px;color:#aaabaf;line-height: 1;}
.overlaybox li span {display:inline-block;}
.overlaybox li .title {font-size:13px;}
</style>

<div class="bd" style="padding:0px;" id="s1">
	<span id="mapnum"></span>
	<div id="map" style="width:100%;height:100%;">&nbsp;</div>
</div>

<script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=zhh3svia3i"></script>
<script>
function fnShopViewMove(){
    var openNewWindow = window.open("about:blank");
    if(MARKER_SPRITE_POSITION[key][9] == "Y" || MARKER_SPRITE_POSITION[key][9] == "S"){
        var param = "surfbus_yy";
    }else{
        var param = "surfbus_dh";
    }
	openNewWindow.location.href = "/pointlist?resparam=" + param;
}

var MARKER_SPRITE_X_OFFSET = 29,
    MARKER_SPRITE_Y_OFFSET = 50,
    MARKER_SPRITE_POSITION = parent.MARKER_SPRITE_POSITION2;

var vlu = parent.MARKER_POINT;
var map = new naver.maps.Map('map', {
            useStyleMap: true,
            center: new naver.maps.LatLng(MARKER_SPRITE_POSITION[vlu][2], MARKER_SPRITE_POSITION[vlu][3]),
            zoom: parent.MARKER_ZOOM
        });

var bounds = map.getBounds(),
    southWest = bounds.getSW(),
    northEast = bounds.getNE(),
    lngSpan = northEast.lng() - southWest.lng(),
    latSpan = northEast.lat() - southWest.lat();

var markers = [],
    infoWindows = [];

for (var key in MARKER_SPRITE_POSITION) {
    var position = new naver.maps.LatLng(MARKER_SPRITE_POSITION[key][2],MARKER_SPRITE_POSITION[key][3]);

    var marker = new naver.maps.Marker({
        map: map,
        position: position,
        title: key,
        // icon: {
        //     url: 'https://surfenjoy.cdn3.cafe24.com/bus/sp_pins_spot_v3.png',
        //     size: new naver.maps.Size(24, 37),
        //     anchor: new naver.maps.Point(12, 37),
        //     origin: new naver.maps.Point(MARKER_SPRITE_POSITION[key][0], MARKER_SPRITE_POSITION[key][1])
        // },
        zIndex: 100
    });

    var busbox = '<div class="overlaybox">' +
		'    <div class="boxtitle">[' + MARKER_SPRITE_POSITION[key][7] + '] '+ MARKER_SPRITE_POSITION[key][8] +'</div>' +
		'    <div class="first" style="background: url(' + MARKER_SPRITE_POSITION[key][4] + ') no-repeat;background-size: 100%">' +
		'    </div>' +
		'    <ul>' +
		'        <li class="up">' +
		'            <span class="title">' + MARKER_SPRITE_POSITION[key][6] + '</span>' +
		'        </li>' +
		'        <li style="background:#d24545;color:#fff;text-align:center;font-size:15px;cursor:pointer;margin-top:5px;padding-top:5px;padding-bottom:5px;" onclick="fnShopViewMove();">' +
		'            <span class="title">정류장 목록보기</span>' +
		'        </li>' +
		'    </ul>' +
		'</div>';

    var infoWindow = new naver.maps.InfoWindow({
        content: busbox,
		backgroundColor: "",
		borderColor: "",
		borderWidth: 0,
		disableAnchor: false,
		anchorSize: new naver.maps.Size(0, 0),
		anchorColor: ""
    });
    markers.push(marker);
    infoWindows.push(infoWindow);

    if(key == vlu){
        infoWindow.open(map, marker)
        map.panTo(position);
    }
};
</script>